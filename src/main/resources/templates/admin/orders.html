<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head('Gestión de Pedidos')"></head>
<body class="admin-orders-body">
<header th:replace="fragments/header :: header"></header>

<main class="admin-orders-main">
    <!-- Elementos decorativos de fondo -->
    <div class="admin-bg-elements">
        <div class="admin-bg-circle circle-1"></div>
        <div class="admin-bg-circle circle-2"></div>
        <div class="admin-bg-dot dot-1"></div>
        <div class="admin-bg-dot dot-2"></div>
        <div class="admin-bg-dot dot-3"></div>
        <div class="admin-bg-line line-1"></div>
        <div class="admin-bg-line line-2"></div>
    </div>

    <div class="container py-5">
        <!-- Header Section con animación -->
        <div class="admin-header-section">
            <div class="admin-header-content">
                <div class="admin-title-wrapper">
                    <div class="admin-icon-wrapper">
                        <i class="bi bi-receipt-cutoff admin-main-icon"></i>
                        <div class="icon-glow-effect"></div>
                    </div>
                    <div class="admin-title-text">
                        <h1 class="admin-main-title">Gestión de Pedidos</h1>
                        <p class="admin-subtitle">Administra y supervisa todos los pedidos del restaurante</p>
                    </div>
                </div>
                <div class="admin-actions">
                    <a th:href="@{/admin}" class="btn-admin-back">
                        <i class="bi bi-arrow-left"></i>
                        <span>Volver al Dashboard</span>
                        <div class="btn-shine"></div>
                    </a>
                </div>
            </div>
            <div class="admin-header-decoration"></div>
        </div>

        <!-- Filtros Section -->
        <div class="admin-filters-card">
            <div class="filters-card-header">
                <div class="filters-header-content">
                    <div class="filters-title-wrapper">
                        <i class="bi bi-funnel filters-icon"></i>
                        <h5 class="filters-title">Filtrar Pedidos</h5>
                    </div>
                    <button id="refresh-btn" class="btn-refresh">
                        <i class="bi bi-arrow-clockwise refresh-icon"></i>
                        <span>Actualizar</span>
                        <div class="refresh-ripple"></div>
                    </button>
                </div>
                <div class="filters-header-line"></div>
            </div>
            <div class="filters-card-body">
                <div class="filters-grid">
                    <div class="filter-group">
                        <label for="status-filter" class="filter-label">
                            <i class="bi bi-flag"></i>
                            Estado
                        </label>
                        <div class="select-wrapper">
                            <select id="status-filter" class="admin-select">
                                <option value="">Todos los estados</option>
                                <option value="PENDING">Pendiente</option>
                                <option value="CONFIRMED">Confirmado</option>
                                <option value="PREPARING">Preparando</option>
                                <option value="READY">Listo</option>
                                <option value="DELIVERED">Entregado</option>
                                <option value="CANCELLED">Cancelado</option>
                            </select>
                            <i class="bi bi-chevron-down select-arrow"></i>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label for="date-from" class="filter-label">
                            <i class="bi bi-calendar-date"></i>
                            Fecha Desde
                        </label>
                        <div class="date-wrapper">
                            <input type="date" id="date-from" class="admin-date-input">
                            <i class="bi bi-calendar3 date-icon"></i>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label for="date-to" class="filter-label">
                            <i class="bi bi-calendar-check"></i>
                            Fecha Hasta
                        </label>
                        <div class="date-wrapper">
                            <input type="date" id="date-to" class="admin-date-input">
                            <i class="bi bi-calendar3 date-icon"></i>
                        </div>
                    </div>
                </div>
                <div class="filters-actions">
                    <button id="apply-filter-btn" class="btn-apply-filter">
                        <i class="bi bi-search"></i>
                        <span>Aplicar Filtros</span>
                        <div class="btn-glow"></div>
                    </button>
                    <button id="clear-filter-btn" class="btn-clear-filter">
                        <i class="bi bi-x-circle"></i>
                        <span>Limpiar Filtros</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Tabla de Pedidos -->
        <div class="orders-table-container">
            <div class="table-header">
                <div class="table-title-wrapper">
                    <i class="bi bi-table table-icon"></i>
                    <h5 class="table-title">Lista de Pedidos</h5>
                </div>
                <div class="table-stats">
                    <span class="stats-item">
                        <i class="bi bi-receipt"></i>
                        <span id="total-orders">0</span> pedidos
                    </span>
                </div>
            </div>
            <div class="table-responsive-wrapper">
                <table class="admin-orders-table">
                    <thead class="table-head">
                    <tr>
                        <th class="th-id">
                            <i class="bi bi-hash"></i>
                            ID
                        </th>
                        <th class="th-customer">
                            <i class="bi bi-person"></i>
                            Cliente
                        </th>
                        <th class="th-date">
                            <i class="bi bi-calendar"></i>
                            Fecha
                        </th>
                        <th class="th-total">
                            <i class="bi bi-currency-dollar"></i>
                            Total
                        </th>
                        <th class="th-status">
                            <i class="bi bi-flag"></i>
                            Estado
                        </th>
                        <th class="th-actions">
                            <i class="bi bi-gear"></i>
                            Acciones
                        </th>
                    </tr>
                    </thead>
                    <tbody id="orders-table-body" class="table-body">
                    </tbody>
                </table>
                <div id="loading-overlay" class="loading-overlay">
                    <div class="loading-spinner">
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                    </div>
                    <p class="loading-text">Cargando pedidos...</p>
                </div>
                <div id="empty-state" class="empty-state" style="display: none;">
                    <div class="empty-icon">
                        <i class="bi bi-inbox"></i>
                    </div>
                    <h4 class="empty-title">No hay pedidos</h4>
                    <p class="empty-message">No se encontraron pedidos que coincidan con los filtros aplicados.</p>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="fragments/footer :: footer"></footer>

<!-- Estilos CSS -->
<style>
    /* Variables CSS */
    :root {
        --admin-primary: #FFD100;
        --admin-primary-hover: #FFDB4D;
        --admin-dark: #121212;
        --admin-secondary-dark: #1E1E1E;
        --admin-card-bg: #1A1A1A;
        --admin-border: rgba(255, 209, 0, 0.1);
        --admin-text-light: #FFFFFF;
        --admin-text-muted: rgba(255, 255, 255, 0.7);
        --admin-text-secondary: rgba(255, 255, 255, 0.5);
        --admin-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        --admin-shadow-hover: 0 12px 40px rgba(0, 0, 0, 0.4);
        --admin-radius: 12px;
        --admin-radius-lg: 16px;
        --admin-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Body y Layout Principal */
    .admin-orders-body {
        background-color: var(--admin-dark);
        color: var(--admin-text-light);
        min-height: 100vh;
        font-family: 'Montserrat', sans-serif;
    }

    .admin-orders-main {
        position: relative;
        min-height: calc(100vh - 200px);
        overflow: hidden;
    }

    /* Elementos decorativos de fondo */
    .admin-bg-elements {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
    }

    .admin-bg-circle {
        position: absolute;
        border-radius: 50%;
        opacity: 0.02;
        background: radial-gradient(circle, var(--admin-primary) 10%, transparent 70%);
    }

    .circle-1 {
        width: 400px;
        height: 400px;
        top: -100px;
        right: -100px;
        animation: float-slow 20s ease-in-out infinite;
    }

    .circle-2 {
        width: 300px;
        height: 300px;
        bottom: -50px;
        left: -100px;
        animation: float-slow 25s ease-in-out infinite reverse;
    }

    .admin-bg-dot {
        position: absolute;
        width: 3px;
        height: 3px;
        border-radius: 50%;
        background-color: rgba(255, 209, 0, 0.1);
        box-shadow: 0 0 10px rgba(255, 209, 0, 0.2);
    }

    .dot-1 {
        top: 20%;
        left: 10%;
        animation: twinkle 4s ease-in-out infinite;
    }

    .dot-2 {
        top: 60%;
        right: 15%;
        animation: twinkle 6s ease-in-out infinite 2s;
    }

    .dot-3 {
        bottom: 30%;
        left: 30%;
        animation: twinkle 5s ease-in-out infinite 1s;
    }

    .admin-bg-line {
        position: absolute;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(255, 209, 0, 0.05), transparent);
        opacity: 0.3;
    }

    .line-1 {
        width: 70%;
        top: 25%;
        left: 15%;
        transform: rotate(-2deg);
    }

    .line-2 {
        width: 60%;
        bottom: 35%;
        right: 10%;
        transform: rotate(1deg);
    }

    @keyframes float-slow {
        0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
        50% { transform: translateY(-20px) translateX(10px) rotate(5deg); }
    }

    @keyframes twinkle {
        0%, 100% { opacity: 0.1; transform: scale(1); }
        50% { opacity: 0.3; transform: scale(1.2); }
    }

    /* Header Section */
    .admin-header-section {
        position: relative;
        margin-bottom: 2rem;
        padding: 2rem 0;
        border-bottom: 1px solid var(--admin-border);
    }

    .admin-header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1.5rem;
    }

    .admin-title-wrapper {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .admin-icon-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, var(--admin-primary), var(--admin-primary-hover));
        border-radius: var(--admin-radius);
        box-shadow: var(--admin-shadow);
    }

    .admin-main-icon {
        font-size: 2rem;
        color: var(--admin-dark);
        z-index: 2;
        position: relative;
    }

    .icon-glow-effect {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255, 209, 0, 0.4), transparent 70%);
        border-radius: var(--admin-radius);
        animation: pulse-glow 3s ease-in-out infinite;
    }

    @keyframes pulse-glow {
        0%, 100% { opacity: 0.5; transform: scale(1); }
        50% { opacity: 0.8; transform: scale(1.05); }
    }

    .admin-title-text h1 {
        font-family: 'Cinzel', serif;
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--admin-text-light);
        margin: 0;
        letter-spacing: 1px;
        background: linear-gradient(135deg, #FFFFFF, var(--admin-primary));
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .admin-subtitle {
        font-size: 1rem;
        color: var(--admin-text-muted);
        margin: 0.5rem 0 0 0;
        font-weight: 400;
    }

    .admin-header-decoration {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--admin-primary), transparent);
    }

    /* Botón Volver */
    .btn-admin-back {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1.5rem;
        background-color: transparent;
        border: 2px solid var(--admin-primary);
        border-radius: 50px;
        color: var(--admin-primary);
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
        transition: var(--admin-transition);
        position: relative;
        overflow: hidden;
    }

    .btn-admin-back::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: var(--admin-primary);
        transition: var(--admin-transition);
        z-index: -1;
    }

    .btn-admin-back:hover {
        color: var(--admin-dark);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(255, 209, 0, 0.3);
    }

    .btn-admin-back:hover::before {
        left: 0;
    }

    .btn-shine {
        position: absolute;
        top: 0;
        left: -100%;
        width: 50%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transform: skewX(-25deg);
        transition: all 0.6s ease;
    }

    .btn-admin-back:hover .btn-shine {
        left: 150%;
    }

    /* Card de Filtros */
    .admin-filters-card {
        background: var(--admin-card-bg);
        border-radius: var(--admin-radius-lg);
        box-shadow: var(--admin-shadow);
        border: 1px solid var(--admin-border);
        margin-bottom: 2rem;
        overflow: hidden;
        position: relative;
    }

    .admin-filters-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--admin-primary), transparent);
    }

    .filters-card-header {
        padding: 1.5rem 2rem 1rem;
        border-bottom: 1px solid var(--admin-border);
        position: relative;
    }

    .filters-header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .filters-title-wrapper {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .filters-icon {
        font-size: 1.3rem;
        color: var(--admin-primary);
    }

    .filters-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--admin-text-light);
        margin: 0;
    }

    .filters-header-line {
        position: absolute;
        bottom: 0;
        left: 2rem;
        width: 60px;
        height: 2px;
        background: var(--admin-primary);
        border-radius: 1px;
    }

    /* Botón Refresh */
    .btn-refresh {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background-color: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--admin-border);
        border-radius: 8px;
        color: var(--admin-text-muted);
        font-size: 0.9rem;
        transition: var(--admin-transition);
        position: relative;
        overflow: hidden;
    }

    .btn-refresh:hover {
        background-color: rgba(255, 209, 0, 0.1);
        color: var(--admin-primary);
        border-color: var(--admin-primary);
        transform: translateY(-1px);
    }

    .refresh-icon {
        transition: transform 0.3s ease;
    }

    .btn-refresh:hover .refresh-icon {
        transform: rotate(180deg);
    }

    .refresh-ripple {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255, 209, 0, 0.3), transparent 70%);
        opacity: 0;
        transition: all 0.3s ease;
        border-radius: 8px;
    }

    .btn-refresh:active .refresh-ripple {
        opacity: 1;
        animation: ripple 0.6s ease;
    }

    @keyframes ripple {
        0% { transform: scale(0); opacity: 1; }
        100% { transform: scale(1); opacity: 0; }
    }

    /* Cuerpo de Filtros */
    .filters-card-body {
        padding: 2rem;
    }

    .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .filter-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 500;
        color: var(--admin-text-light);
        font-size: 0.95rem;
    }

    .filter-label i {
        font-size: 1rem;
        color: var(--admin-primary);
    }

    /* Select personalizado */
    .select-wrapper {
        position: relative;
    }

    .admin-select {
        width: 100%;
        padding: 0.75rem 1rem;
        padding-right: 2.5rem;
        background-color: var(--admin-secondary-dark);
        border: 1px solid var(--admin-border);
        border-radius: var(--admin-radius);
        color: var(--admin-text-light);
        font-size: 0.95rem;
        transition: var(--admin-transition);
        appearance: none;
    }

    .admin-select:focus {
        outline: none;
        border-color: var(--admin-primary);
        box-shadow: 0 0 0 3px rgba(255, 209, 0, 0.1);
        background-color: rgba(255, 209, 0, 0.05);
    }

    .admin-select option {
        background-color: var(--admin-secondary-dark);
        color: var(--admin-text-light);
        padding: 0.5rem;
    }

    .select-arrow {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--admin-text-muted);
        pointer-events: none;
        transition: var(--admin-transition);
    }

    .select-wrapper:hover .select-arrow {
        color: var(--admin-primary);
    }

    /* Inputs de fecha */
    .date-wrapper {
        position: relative;
    }

    .admin-date-input {
        width: 100%;
        padding: 0.75rem 1rem;
        padding-right: 2.5rem;
        background-color: var(--admin-secondary-dark);
        border: 1px solid var(--admin-border);
        border-radius: var(--admin-radius);
        color: var(--admin-text-light);
        font-size: 0.95rem;
        transition: var(--admin-transition);
    }

    .admin-date-input:focus {
        outline: none;
        border-color: var(--admin-primary);
        box-shadow: 0 0 0 3px rgba(255, 209, 0, 0.1);
        background-color: rgba(255, 209, 0, 0.05);
    }

    .admin-date-input::-webkit-calendar-picker-indicator {
        opacity: 0;
        position: absolute;
        right: 1rem;
        cursor: pointer;
    }

    .date-icon {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--admin-text-muted);
        pointer-events: none;
        transition: var(--admin-transition);
    }

    .date-wrapper:hover .date-icon {
        color: var(--admin-primary);
    }

    /* Acciones de Filtros */
    .filters-actions {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        flex-wrap: wrap;
    }

    .btn-apply-filter {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, var(--admin-primary), var(--admin-primary-hover));
        border: none;
        border-radius: 50px;
        color: var(--admin-dark);
        font-weight: 600;
        font-size: 0.95rem;
        transition: var(--admin-transition);
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(255, 209, 0, 0.3);
    }

    .btn-apply-filter:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(255, 209, 0, 0.4);
    }

    .btn-glow {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent 70%);
        opacity: 0;
        transition: all 0.3s ease;
        border-radius: 50px;
    }

    .btn-apply-filter:hover .btn-glow {
        opacity: 1;
        animation: glow-pulse 1.5s ease infinite;
    }

    @keyframes glow-pulse {
        0%, 100% { transform: scale(1); opacity: 0.3; }
        50% { transform: scale(1.05); opacity: 0.6; }
    }

    .btn-clear-filter {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1.5rem;
        background-color: transparent;
        border: 1px solid var(--admin-border);
        border-radius: 50px;
        color: var(--admin-text-muted);
        font-weight: 500;
        font-size: 0.95rem;
        transition: var(--admin-transition);
    }

    .btn-clear-filter:hover {
        background-color: rgba(255, 255, 255, 0.05);
        border-color: var(--admin-text-muted);
        color: var(--admin-text-light);
        transform: translateY(-1px);
    }

    /* Contenedor de Tabla */
    .orders-table-container {
        background: var(--admin-card-bg);
        border-radius: var(--admin-radius-lg);
        box-shadow: var(--admin-shadow);
        border: 1px solid var(--admin-border);
        overflow: hidden;
        position: relative;
    }

    .orders-table-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--admin-primary), transparent);
    }

    /* Header de Tabla */
    .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem 2rem;
        border-bottom: 1px solid var(--admin-border);
        flex-wrap: wrap;
        gap: 1rem;
    }

    .table-title-wrapper {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .table-icon {
        font-size: 1.3rem;
        color: var(--admin-primary);
    }

    .table-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--admin-text-light);
        margin: 0;
    }

    .table-stats {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .stats-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background-color: rgba(255, 209, 0, 0.1);
        border-radius: 20px;
        color: var(--admin-primary);
        font-size: 0.9rem;
        font-weight: 500;
    }

    /* Wrapper de Tabla Responsive */
    .table-responsive-wrapper {
        position: relative;
        overflow-x: auto;
        min-height: 400px;
    }

    /* Tabla Principal */
    .admin-orders-table {
        width: 100%;
        border-collapse: collapse;
        background-color: transparent;
    }

    /* Cabecera de Tabla */
    .table-head {
        background: linear-gradient(135deg, var(--admin-secondary-dark), rgba(255, 209, 0, 0.05));
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .table-head th {
        padding: 1rem 1.5rem;
        text-align: left;
        font-weight: 600;
        color: var(--admin-text-light);
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 2px solid var(--admin-border);
        position: relative;
    }

    .table-head th i {
        margin-right: 0.5rem;
        color: var(--admin-primary);
        font-size: 1rem;
    }

    .table-head th::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: var(--admin-primary);
        transition: width 0.3s ease;
    }

    .table-head th:hover::after {
        width: 100%;
    }

    /* Cuerpo de Tabla */
    .table-body {
        background-color: transparent;
    }

    .order-row {
        border-bottom: 1px solid var(--admin-border);
        transition: var(--admin-transition);
        position: relative;
    }

    .order-row::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 0;
        height: 100%;
        background: linear-gradient(90deg, var(--admin-primary), transparent);
        transition: width 0.3s ease;
        opacity: 0.1;
    }

    .order-row:hover {
        background-color: rgba(255, 209, 0, 0.02);
        transform: translateX(5px);
    }

    .order-row:hover::before {
        width: 4px;
    }

    .order-row td {
        padding: 1.25rem 1.5rem;
        vertical-align: middle;
        color: var(--admin-text-light);
        font-size: 0.95rem;
    }

    /* Celdas específicas */
    .td-id {
        width: 80px;
    }

    .order-id-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 40px;
        height: 28px;
        background: linear-gradient(135deg, var(--admin-primary), var(--admin-primary-hover));
        color: var(--admin-dark);
        border-radius: 14px;
        font-weight: 600;
        font-size: 0.85rem;
        box-shadow: 0 2px 8px rgba(255, 209, 0, 0.3);
    }

    .customer-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .customer-avatar {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--admin-primary), var(--admin-primary-hover));
        color: var(--admin-dark);
        border-radius: 50%;
        font-weight: 600;
        font-size: 0.9rem;
        box-shadow: 0 2px 8px rgba(255, 209, 0, 0.2);
    }

    .customer-name {
        font-weight: 500;
        color: var(--admin-text-light);
    }

    .date-info {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .date-text {
        font-weight: 500;
        color: var(--admin-text-light);
        font-size: 0.9rem;
    }

    .time-text {
        font-size: 0.8rem;
        color: var(--admin-text-muted);
    }

    .total-amount {
        font-weight: 600;
        font-size: 1.1rem;
        color: var(--admin-primary);
        text-shadow: 0 0 10px rgba(255, 209, 0, 0.3);
    }

    /* Badges de Estado */
    .status-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
    }

    .status-badge::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
    }

    .status-badge:hover::before {
        left: 100%;
    }

    .status-pending {
        background: linear-gradient(135deg, #FFC107, #FFB300);
        color: #212529;
    }

    .status-confirmed {
        background: linear-gradient(135deg, #17A2B8, #138496);
        color: #FFFFFF;
    }

    .status-preparing {
        background: linear-gradient(135deg, #007BFF, #0056B3);
        color: #FFFFFF;
    }

    .status-ready {
        background: linear-gradient(135deg, #28A745, #1E7E34);
        color: #FFFFFF;
    }

    .status-delivered {
        background: linear-gradient(135deg, #20C997, #17A085);
        color: #FFFFFF;
    }

    .status-cancelled {
        background: linear-gradient(135deg, #DC3545, #C82333);
        color: #FFFFFF;
    }

    /* Acciones */
    .actions-wrapper {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-view {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background-color: rgba(255, 209, 0, 0.1);
        border: 1px solid var(--admin-primary);
        border-radius: 8px;
        color: var(--admin-primary);
        text-decoration: none;
        font-size: 0.85rem;
        font-weight: 500;
        transition: var(--admin-transition);
    }

    .btn-view:hover {
        background-color: var(--admin-primary);
        color: var(--admin-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(255, 209, 0, 0.3);
    }

    .dropdown-wrapper {
        position: relative;
    }

    .btn-status-dropdown {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        background-color: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--admin-border);
        border-radius: 6px;
        color: var(--admin-text-muted);
        transition: var(--admin-transition);
    }

    .btn-status-dropdown:hover {
        background-color: rgba(255, 209, 0, 0.1);
        border-color: var(--admin-primary);
        color: var(--admin-primary);
    }

    /* Dropdown Menu */
    .status-dropdown-menu {
        background-color: var(--admin-card-bg);
        border: 1px solid var(--admin-border);
        border-radius: var(--admin-radius);
        box-shadow: var(--admin-shadow);
        min-width: 180px;
        padding: 0.5rem 0;
        margin: 0;
        list-style: none;
    }

    .dropdown-header {
        padding: 0.5rem 1rem;
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--admin-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 1px solid var(--admin-border);
        margin-bottom: 0.5rem;
    }

    .status-dropdown-menu .dropdown-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        color: var(--admin-text-light);
        text-decoration: none;
        font-size: 0.9rem;
        transition: var(--admin-transition);
        border: none;
        background: none;
        width: 100%;
        text-align: left;
    }

    .status-dropdown-menu .dropdown-item:hover {
        background-color: rgba(255, 209, 0, 0.1);
        color: var(--admin-primary);
    }

    .status-dropdown-menu .dropdown-item i {
        font-size: 1rem;
        width: 16px;
    }

    .status-confirmed:hover { background-color: rgba(23, 162, 184, 0.1); color: #17A2B8; }
    .status-preparing:hover { background-color: rgba(0, 123, 255, 0.1); color: #007BFF; }
    .status-ready:hover { background-color: rgba(40, 167, 69, 0.1); color: #28A745; }
    .status-delivered:hover { background-color: rgba(32, 201, 151, 0.1); color: #20C997; }
    .status-cancelled:hover { background-color: rgba(220, 53, 69, 0.1); color: #DC3545; }

    /* Loading Overlay */
    .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(26, 26, 26, 0.9);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 100;
        backdrop-filter: blur(5px);
    }

    .loading-spinner {
        position: relative;
        width: 60px;
        height: 60px;
        margin-bottom: 1rem;
    }

    .spinner-ring {
        position: absolute;
        width: 100%;
        height: 100%;
        border: 3px solid transparent;
        border-top: 3px solid var(--admin-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    .spinner-ring:nth-child(2) {
        width: 80%;
        height: 80%;
        top: 10%;
        left: 10%;
        border-top-color: rgba(255, 209, 0, 0.6);
        animation-duration: 1.5s;
        animation-direction: reverse;
    }

    .spinner-ring:nth-child(3) {
        width: 60%;
        height: 60%;
        top: 20%;
        left: 20%;
        border-top-color: rgba(255, 209, 0, 0.3);
        animation-duration: 2s;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .loading-text {
        color: var(--admin-text-muted);
        font-size: 1rem;
        font-weight: 500;
        margin: 0;
        animation: pulse-text 1.5s ease-in-out infinite;
    }

    @keyframes pulse-text {
        0%, 100% { opacity: 0.6; }
        50% { opacity: 1; }
    }

    /* Empty State */
    .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 4rem 2rem;
        text-align: center;
    }

    .empty-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, rgba(255, 209, 0, 0.1), rgba(255, 209, 0, 0.05));
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.5rem;
        border: 2px solid rgba(255, 209, 0, 0.2);
    }

    .empty-icon i {
        font-size: 2.5rem;
        color: var(--admin-primary);
        opacity: 0.7;
    }

    .empty-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--admin-text-light);
        margin-bottom: 0.5rem;
    }

    .empty-message {
        font-size: 1rem;
        color: var(--admin-text-muted);
        max-width: 400px;
        margin: 0;
        line-height: 1.5;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
        .filters-grid {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }
    }

    @media (max-width: 768px) {
        .admin-header-content {
            flex-direction: column;
            text-align: center;
        }

        .admin-title-wrapper {
            flex-direction: column;
            text-align: center;
        }

        .admin-title-text h1 {
            font-size: 2rem;
        }

        .filters-grid {
            grid-template-columns: 1fr;
        }

        .filters-actions {
            justify-content: center;
        }

        .table-header {
            flex-direction: column;
            text-align: center;
        }

        .admin-orders-table {
            font-size: 0.85rem;
        }

        .order-row td {
            padding: 1rem 0.75rem;
        }

        .actions-wrapper {
            flex-direction: column;
            gap: 0.25rem;
        }

        .btn-view {
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem;
        }
    }

    @media (max-width: 576px) {
        .container {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        .filters-card-body,
        .table-header {
            padding: 1rem;
        }

        .admin-title-text h1 {
            font-size: 1.75rem;
        }

        .customer-info {
            flex-direction: column;
            gap: 0.5rem;
            text-align: center;
        }

        .date-info {
            text-align: center;
        }

        .total-amount {
            font-size: 1rem;
        }
    }

    /* Animaciones adicionales */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .admin-filters-card,
    .orders-table-container {
        animation: fadeInUp 0.6s ease forwards;
    }

    .orders-table-container {
        animation-delay: 0.2s;
    }

    /* Efectos hover mejorados */
    .order-row:hover .customer-avatar {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(255, 209, 0, 0.4);
    }

    .order-row:hover .order-id-badge {
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(255, 209, 0, 0.5);
    }

    .order-row:hover .total-amount {
        transform: scale(1.05);
        text-shadow: 0 0 15px rgba(255, 209, 0, 0.6);
    }

    /* Transiciones suaves para elementos dinámicos */
    .order-row {
        opacity: 0;
        animation: fadeInUp 0.5s ease forwards;
    }

    .order-row:nth-child(1) { animation-delay: 0.1s; }
    .order-row:nth-child(2) { animation-delay: 0.2s; }
    .order-row:nth-child(3) { animation-delay: 0.3s; }
    .order-row:nth-child(4) { animation-delay: 0.4s; }
    .order-row:nth-child(5) { animation-delay: 0.5s; }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Inicializar loading overlay
        const loadingOverlay = document.getElementById('loading-overlay');
        const emptyState = document.getElementById('empty-state');

        // Funciones de utilidad para mostrar/ocultar loading
        function showLoading() {
            loadingOverlay.style.display = 'flex';
            emptyState.style.display = 'none';
        }

        function hideLoading() {
            loadingOverlay.style.display = 'none';
        }

        function showEmptyState() {
            hideLoading();
            emptyState.style.display = 'flex';
        }

        function hideEmptyState() {
            emptyState.style.display = 'none';
        }

        // Limitar el campo "Hasta" (date-to) al día actual
        const dateToInput = document.getElementById('date-to');
        if (dateToInput) {
            const today = new Date().toISOString().split('T')[0];
            dateToInput.setAttribute('max', today);
        }

        // Limitar el campo "Desde" (date-from) a días anteriores al de hoy
        const dateFromInput = document.getElementById('date-from');
        if (dateFromInput) {
            const today = new Date().toISOString().split('T')[0];
            dateFromInput.setAttribute('max', today);
        }

        // Agregar event listeners para los filtros
        document.getElementById('apply-filter-btn').addEventListener('click', function() {
            // Efecto de ripple
            const ripple = this.querySelector('.btn-glow');
            ripple.style.animation = 'none';
            setTimeout(() => {
                ripple.style.animation = 'glow-pulse 1.5s ease infinite';
            }, 10);

            filterOrders();
        });

        document.getElementById('clear-filter-btn').addEventListener('click', clearFilters);

        document.getElementById('refresh-btn').addEventListener('click', function() {
            // Animación del icono de refresh
            const icon = this.querySelector('.refresh-icon');
            icon.style.transform = 'rotate(360deg)';
            setTimeout(() => {
                icon.style.transform = 'rotate(0deg)';
            }, 300);

            loadOrders();
        });

        // Agregar event listeners para cambios de estado
        document.querySelectorAll('.status-change').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const orderId = this.getAttribute('data-id');
                const status = this.getAttribute('data-status');
                changeOrderStatus(orderId, status);
            });
        });

        // Cargar pedidos inicialmente
        loadOrders();

        // Actualizar contador de pedidos
        function updateOrdersCount(count) {
            document.getElementById('total-orders').textContent = count;
        }
    });

    function loadOrders() {
        const loadingOverlay = document.getElementById('loading-overlay');
        const emptyState = document.getElementById('empty-state');

        // Mostrar loading
        loadingOverlay.style.display = 'flex';
        emptyState.style.display = 'none';

        fetch('/api/orders/all')
            .then(response => {
                console.log('Status:', response.status);
                return response.text().then(text => {
                    console.log('Raw response:', text);
                    if (!response.ok) throw new Error('Error al cargar los pedidos. Status: ' + response.status + '\n' + text);
                    try {
                        return JSON.parse(text);
                    } catch (e) {
                        throw new Error('Respuesta inválida del backend: ' + e + '\n' + text);
                    }
                });
            })
            .then(orders => {
                displayOrders(orders);
            })
            .catch(error => {
                console.error('Error:', error);
                loadingOverlay.style.display = 'none';

                // Mostrar notificación de error elegante
                showErrorNotification('Ha ocurrido un error al cargar los pedidos: ' + error.message);
            });
    }

    function filterOrders() {
        const status = document.getElementById('status-filter').value;
        let dateFrom = document.getElementById('date-from').value;
        let dateTo = document.getElementById('date-to').value;

        const loadingOverlay = document.getElementById('loading-overlay');
        const emptyState = document.getElementById('empty-state');

        // Mostrar loading
        loadingOverlay.style.display = 'flex';
        emptyState.style.display = 'none';

        let url = '/api/orders/all';
        const params = [];

        if (status) {
            params.push(`status=${status}`);
        }

        // Ajustar formato de fechas para LocalDateTime
        if (dateFrom) {
            dateFrom = dateFrom + 'T00:00:00';
            params.push(`from=${dateFrom}`);
        }

        if (dateTo) {
            dateTo = dateTo + 'T23:59:59';
            params.push(`to=${dateTo}`);
        }

        if (params.length > 0) {
            url += '?' + params.join('&');
        }

        fetch(url)
            .then(response => {
                console.log('Status:', response.status);
                return response.text().then(text => {
                    console.log('Raw response:', text);
                    if (!response.ok) throw new Error('Error al filtrar los pedidos. Status: ' + response.status + '\n' + text);
                    try {
                        return JSON.parse(text);
                    } catch (e) {
                        throw new Error('Respuesta inválida del backend: ' + e + '\n' + text);
                    }
                });
            })
            .then(orders => {
                displayOrders(orders);
            })
            .catch(error => {
                console.error('Error:', error);
                loadingOverlay.style.display = 'none';
                showErrorNotification('Ha ocurrido un error al filtrar los pedidos: ' + error.message);
            });
    }

    function clearFilters() {
        // Animación de limpieza
        const inputs = ['status-filter', 'date-from', 'date-to'];
        inputs.forEach((inputId, index) => {
            setTimeout(() => {
                const input = document.getElementById(inputId);
                input.style.transform = 'scale(0.95)';
                input.value = '';
                setTimeout(() => {
                    input.style.transform = 'scale(1)';
                }, 150);
            }, index * 100);
        });

        setTimeout(() => {
            loadOrders();
        }, 300);
    }

    function changeOrderStatus(orderId, status) {
        // Crear modal de confirmación personalizado
        const statusText = translateStatus(status);
        if (!showConfirmationModal(`¿Estás seguro de cambiar el estado del pedido #${orderId} a ${statusText}?`)) {
            return;
        }

        fetch(`/api/orders/${orderId}/status`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(status)
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Error al cambiar el estado del pedido');
                }
                return response.json();
            })
            .then(order => {
                showSuccessNotification(`El estado del pedido #${orderId} ha sido actualizado a ${translateStatus(order.status)}`);
                loadOrders();
            })
            .catch(error => {
                console.error('Error:', error);
                showErrorNotification('Ha ocurrido un error al cambiar el estado del pedido');
            });
    }

    function displayOrders(orders) {
        const tableBody = document.getElementById('orders-table-body');
        const loadingOverlay = document.getElementById('loading-overlay');
        const emptyState = document.getElementById('empty-state');

        // Ocultar loading
        loadingOverlay.style.display = 'none';

        // Actualizar contador
        document.getElementById('total-orders').textContent = orders.length;

        if (orders.length === 0) {
            emptyState.style.display = 'flex';
            tableBody.innerHTML = '';
            return;
        }

        emptyState.style.display = 'none';
        tableBody.innerHTML = '';

        orders.forEach((order, index) => {
            const row = document.createElement('tr');
            row.className = 'order-row';
            row.style.animationDelay = `${index * 0.1}s`;

            const statusClass = getStatusClass(order.status);
            const formattedDate = new Date(order.orderDate).toLocaleDateString('es-ES');
            const formattedTime = new Date(order.orderDate).toLocaleTimeString('es-ES', {
                hour: '2-digit',
                minute: '2-digit'
            });
            const customerInitial = order.customerName.charAt(0).toUpperCase();

            row.innerHTML = `
                <td class="td-id">
                    <span class="order-id-badge">${order.id}</span>
                </td>
                <td class="td-customer">
                    <div class="customer-info">
                        <div class="customer-avatar">
                            <span>${customerInitial}</span>
                        </div>
                        <span class="customer-name">${order.customerName}</span>
                    </div>
                </td>
                <td class="td-date">
                    <div class="date-info">
                        <span class="date-text">${formattedDate}</span>
                        <span class="time-text">${formattedTime}</span>
                    </div>
                <td class="td-total">
                    <span class="total-amount">$${order.totalAmount.toFixed(2)}</span>
                </td>
                <td class="td-status">
                    <span class="status-badge status-${order.status.toLowerCase()}">${translateStatus(order.status)}</span>
                </td>
                <td class="td-actions">
                    <div class="actions-wrapper">
                        <a href="/admin/orders/${order.id}" class="btn-view">
                            <i class="bi bi-eye"></i>
                            <span>Ver</span>
                        </a>
                        <div class="dropdown-wrapper">
                            <button type="button" class="btn-status-dropdown" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots-vertical"></i>
                            </button>
                            <ul class="status-dropdown-menu">
                                <li class="dropdown-header">Cambiar Estado</li>
                                <li><a class="dropdown-item status-change status-confirmed" data-id="${order.id}" data-status="CONFIRMED" href="#">
                                    <i class="bi bi-check-circle"></i> Confirmar
                                </a></li>
                                <li><a class="dropdown-item status-change status-preparing" data-id="${order.id}" data-status="PREPARING" href="#">
                                    <i class="bi bi-clock"></i> Preparando
                                </a></li>
                                <li><a class="dropdown-item status-change status-ready" data-id="${order.id}" data-status="READY" href="#">
                                    <i class="bi bi-check2-circle"></i> Listo
                                </a></li>
                                <li><a class="dropdown-item status-change status-delivered" data-id="${order.id}" data-status="DELIVERED" href="#">
                                    <i class="bi bi-truck"></i> Entregado
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item status-change status-cancelled" data-id="${order.id}" data-status="CANCELLED" href="#">
                                    <i class="bi bi-x-circle"></i> Cancelar
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </td>
            `;

            tableBody.appendChild(row);
        });

        // Volver a agregar los event listeners con efectos mejorados
        document.querySelectorAll('.status-change').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();

                // Efecto visual al hacer clic
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);

                const orderId = this.getAttribute('data-id');
                const status = this.getAttribute('data-status');
                changeOrderStatus(orderId, status);
            });
        });

        // Agregar efectos hover mejorados a las filas
        document.querySelectorAll('.order-row').forEach(row => {
            row.addEventListener('mouseenter', function() {
                this.style.transform = 'translateX(5px)';
            });

            row.addEventListener('mouseleave', function() {
                this.style.transform = 'translateX(0)';
            });
        });
    }

    function getStatusClass(status) {
        const statusMap = {
            'PENDING': 'status-pending',
            'CONFIRMED': 'status-confirmed',
            'PREPARING': 'status-preparing',
            'READY': 'status-ready',
            'DELIVERED': 'status-delivered',
            'CANCELLED': 'status-cancelled'
        };

        return statusMap[status] || 'status-pending';
    }

    function translateStatus(status) {
        const statusMap = {
            'PENDING': 'Pendiente',
            'CONFIRMED': 'Confirmado',
            'PREPARING': 'Preparando',
            'READY': 'Listo',
            'DELIVERED': 'Entregado',
            'CANCELLED': 'Cancelado'
        };

        return statusMap[status] || status;
    }

    // Funciones de notificación mejoradas
    function showSuccessNotification(message) {
        createNotification(message, 'success');
    }

    function showErrorNotification(message) {
        createNotification(message, 'error');
    }

    function showConfirmationModal(message) {
        return confirm(message); // Puedes reemplazar esto con un modal personalizado más adelante
    }

    function createNotification(message, type) {
        // Crear contenedor de notificaciones si no existe
        let container = document.getElementById('notification-container');
        if (!container) {
            container = document.createElement('div');
            container.id = 'notification-container';
            container.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 9999;
                display: flex;
                flex-direction: column;
                gap: 10px;
                pointer-events: none;
            `;
            document.body.appendChild(container);
        }

        // Crear notificación
        const notification = document.createElement('div');
        notification.style.cssText = `
            background: ${type === 'success' ? 'linear-gradient(135deg, #28A745, #20C997)' : 'linear-gradient(135deg, #DC3545, #C82333)'};
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            font-size: 0.9rem;
            max-width: 350px;
            pointer-events: auto;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        `;

        const icon = type === 'success' ? 'bi-check-circle-fill' : 'bi-exclamation-triangle-fill';
        notification.innerHTML = `
            <i class="bi ${icon}" style="font-size: 1.2rem;"></i>
            <span>${message}</span>
            <button onclick="this.parentElement.remove()" style="
                background: none;
                border: none;
                color: rgba(255, 255, 255, 0.8);
                font-size: 1.2rem;
                cursor: pointer;
                padding: 0;
                margin-left: auto;
                transition: color 0.2s ease;
            " onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'">
                <i class="bi bi-x"></i>
            </button>
        `;

        container.appendChild(notification);

        // Animar entrada
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 100);

        // Auto-remover después de 5 segundos
        setTimeout(() => {
            if (notification.parentElement) {
                notification.style.transform = 'translateX(400px)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 400);
            }
        }, 5000);
    }

    // Efectos adicionales para mejorar la experiencia
    document.addEventListener('DOMContentLoaded', function() {
        // Efecto de aparición gradual para elementos
        const elements = document.querySelectorAll('.admin-filters-card, .orders-table-container');
        elements.forEach((el, index) => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            setTimeout(() => {
                el.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                el.style.opacity = '1';
                el.style.transform = 'translateY(0)';
            }, index * 200);
        });

        // Efecto parallax sutil para elementos de fondo
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const parallaxElements = document.querySelectorAll('.admin-bg-circle');

            parallaxElements.forEach((el, index) => {
                const speed = 0.1 + (index * 0.05);
                el.style.transform = `translateY(${scrolled * speed}px)`;
            });
        });

        // Mejorar accesibilidad con navegación por teclado
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Cerrar dropdowns abiertos
                const openDropdowns = document.querySelectorAll('.dropdown-menu.show');
                openDropdowns.forEach(dropdown => {
                    dropdown.classList.remove('show');
                });
            }
        });

        // Agregar indicadores de carga para botones
        const buttons = document.querySelectorAll('button, .btn-view');
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                if (!this.classList.contains('loading')) {
                    this.classList.add('loading');
                    const originalContent = this.innerHTML;

                    // Simular carga (puedes ajustar esto según tus necesidades)
                    setTimeout(() => {
                        this.classList.remove('loading');
                    }, 1000);
                }
            });
        });
    });

    // Funciones de utilidad adicionales
    function formatCurrency(amount) {
        return new Intl.NumberFormat('es-ES', {
            style: 'currency',
            currency: 'USD'
        }).format(amount);
    }

    function formatDate(dateString) {
        return new Intl.DateTimeFormat('es-ES', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
        }).format(new Date(dateString));
    }

    // Mejorar rendimiento con debouncing para filtros
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    // Aplicar debouncing a los filtros de fecha
    const debouncedFilter = debounce(filterOrders, 300);

    document.getElementById('date-from').addEventListener('change', debouncedFilter);
    document.getElementById('date-to').addEventListener('change', debouncedFilter);
    document.getElementById('status-filter').addEventListener('change', debouncedFilter);
</script>

<!-- CSS adicional para estados de carga y efectos -->
<style>
    /* Estados de carga para botones */
    .loading {
        position: relative;
        pointer-events: none;
        opacity: 0.7;
    }

    .loading::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 16px;
        height: 16px;
        margin: -8px 0 0 -8px;
        border: 2px solid transparent;
        border-top: 2px solid currentColor;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    /* Mejoras en el scrollbar */
    .table-responsive-wrapper::-webkit-scrollbar {
        height: 8px;
    }

    .table-responsive-wrapper::-webkit-scrollbar-track {
        background: var(--admin-secondary-dark);
        border-radius: 4px;
    }

    .table-responsive-wrapper::-webkit-scrollbar-thumb {
        background: linear-gradient(90deg, var(--admin-primary), var(--admin-primary-hover));
        border-radius: 4px;
    }

    .table-responsive-wrapper::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(90deg, var(--admin-primary-hover), var(--admin-primary));
    }

    /* Efectos de focus mejorados */
    .admin-select:focus,
    .admin-date-input:focus,
    .btn-admin-back:focus,
    .btn-apply-filter:focus,
    .btn-clear-filter:focus,
    .btn-refresh:focus {
        outline: 2px solid var(--admin-primary);
        outline-offset: 2px;
    }

    /* Animación de entrada para notificaciones */
    @keyframes slideInRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    @keyframes slideOutRight {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }

    /* Mejoras en la tipografía */
    .admin-main-title {
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* Efectos de hover más suaves */
    * {
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Mejoras en el contraste para accesibilidad */
    @media (prefers-contrast: high) {
        :root {
            --admin-border: rgba(255, 209, 0, 0.3);
            --admin-text-muted: rgba(255, 255, 255, 0.9);
        }
    }

    /* Soporte para modo de movimiento reducido */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* Mejoras para impresión */
    @media print {
        .admin-bg-elements,
        .btn-admin-back,
        .admin-filters-card,
        .loading-overlay {
            display: none !important;
        }

        .admin-orders-table {
            border-collapse: collapse;
        }

        .admin-orders-table th,
        .admin-orders-table td {
            border: 1px solid #000;
            padding: 8px;
        }
    }
</style>

<style>
    /* Estilos mejorados para dropdowns */
    .dropdown-wrapper {
        position: relative;
        display: inline-block;
    }

    .btn-status-dropdown {
        background: rgba(255, 209, 0, 0.1);
        border: 1px solid rgba(255, 209, 0, 0.3);
        color: var(--admin-primary);
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 16px;
    }

    .btn-status-dropdown:hover {
        background: rgba(255, 209, 0, 0.2);
        border-color: var(--admin-primary);
        transform: scale(1.05);
    }

    .status-dropdown-menu {
        position: absolute;
        top: 100%;
        right: 0;
        background: var(--admin-secondary);
        border: 1px solid rgba(255, 209, 0, 0.3);
        border-radius: var(--admin-radius);
        box-shadow: var(--admin-shadow);
        min-width: 180px;
        padding: 8px 0;
        margin-top: 5px;
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .status-dropdown-menu.show {
        opacity: 1;
        transform: translateY(0);
    }

    .dropdown-header {
        padding: 8px 16px;
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--admin-primary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 1px solid rgba(255, 209, 0, 0.2);
        margin-bottom: 4px;
    }

    .dropdown-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.2s ease;
        cursor: pointer;
    }

    .dropdown-item:hover {
        background: rgba(255, 209, 0, 0.1);
        color: var(--admin-primary);
        transform: translateX(5px);
    }

    .dropdown-item i {
        font-size: 14px;
        width: 16px;
    }

    .dropdown-divider {
        height: 1px;
        background: rgba(255, 209, 0, 0.2);
        border: none;
        margin: 4px 0;
    }

    /* Animación para mostrar dropdown */
    @keyframes dropdownSlideIn {
        from {
            opacity: 0;
            transform: translateY(-10px) scale(0.95);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .status-dropdown-menu[style*="display: block"] {
        animation: dropdownSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
</style>

<script>
    // Función mejorada para inicializar dropdowns
    function initializeDropdowns() {
        // Cerrar todos los dropdowns primero
        document.querySelectorAll('.status-dropdown-menu').forEach(menu => {
            menu.classList.remove('show');
            menu.style.display = 'none';
        });

        // Remover event listeners existentes para evitar duplicados
        document.querySelectorAll('.btn-status-dropdown').forEach(btn => {
            btn.replaceWith(btn.cloneNode(true));
        });

        // Agregar nuevos event listeners
        document.querySelectorAll('.btn-status-dropdown').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const menu = this.nextElementSibling;
                const isOpen = menu.style.display === 'block';
                
                // Cerrar todos los otros dropdowns
                document.querySelectorAll('.status-dropdown-menu').forEach(otherMenu => {
                    if (otherMenu !== menu) {
                        otherMenu.style.display = 'none';
                        otherMenu.classList.remove('show');
                    }
                });
                
                // Toggle el dropdown actual
                if (isOpen) {
                    menu.style.display = 'none';
                    menu.classList.remove('show');
                } else {
                    menu.style.display = 'block';
                    menu.classList.add('show');
                }
            });
        });

        // Cerrar dropdowns al hacer clic fuera
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.dropdown-wrapper')) {
                document.querySelectorAll('.status-dropdown-menu').forEach(menu => {
                    menu.style.display = 'none';
                    menu.classList.remove('show');
                });
            }
        });
    }

    // Función actualizada para renderizar pedidos
    function renderOrders(orders) {
        const tableBody = document.getElementById('orders-table-body');
        tableBody.innerHTML = '';

        if (orders.length === 0) {
            // ... código del estado vacío ...
            return;
        }

        orders.forEach((order, index) => {
            const row = document.createElement('tr');
            row.className = 'order-row';
            row.style.animationDelay = `${index * 0.1}s`;

            row.innerHTML = `
                <td class="td-id">
                    <div class="id-circle">${order.id}</div>
                </td>
                <td class="td-customer">
                    <div class="customer-info">
                        <div class="customer-avatar">
                            ${order.customerName.charAt(0).toUpperCase()}
                        </div>
                        <span class="customer-name">${order.customerName}</span>
                    </div>
                </td>
                <td class="td-date">
                    <div class="date-info">
                        <span class="date-main">${formatDate(order.createdAt)}</span>
                    </div>
                </td>
                <td class="td-total">
                    <span class="total-amount">$${order.totalAmount.toFixed(2)}</span>
                </td>
                <td class="td-status">
                    <span class="status-badge status-${order.status.toLowerCase()}">${translateStatus(order.status)}</span>
                </td>
                <td class="td-actions">
                    <div class="actions-wrapper">
                        <a href="/admin/orders/${order.id}" class="btn-view">
                            <i class="bi bi-eye"></i>
                            <span>Ver</span>
                        </a>
                        <div class="dropdown-wrapper">
                            <button type="button" class="btn-status-dropdown">
                                <i class="bi bi-three-dots-vertical"></i>
                            </button>
                            <ul class="status-dropdown-menu" style="display: none;">
                                <li class="dropdown-header">Cambiar Estado</li>
                                <li><a class="dropdown-item status-change status-confirmed" data-id="${order.id}" data-status="CONFIRMED" href="#">
                                    <i class="bi bi-check-circle"></i> Confirmar
                                </a></li>
                                <li><a class="dropdown-item status-change status-preparing" data-id="${order.id}" data-status="PREPARING" href="#">
                                    <i class="bi bi-clock"></i> Preparando
                                </a></li>
                                <li><a class="dropdown-item status-change status-ready" data-id="${order.id}" data-status="READY" href="#">
                                    <i class="bi bi-check2-circle"></i> Listo
                                </a></li>
                                <li><a class="dropdown-item status-change status-delivered" data-id="${order.id}" data-status="DELIVERED" href="#">
                                    <i class="bi bi-truck"></i> Entregado
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item status-change status-cancelled" data-id="${order.id}" data-status="CANCELLED" href="#">
                                    <i class="bi bi-x-circle"></i> Cancelar
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </td>
            `;

            tableBody.appendChild(row);
        });

        // Inicializar dropdowns después de renderizar
        setTimeout(() => {
            initializeDropdowns();
            initializeStatusChangeListeners();
        }, 100);

        // Agregar efectos hover mejorados a las filas
        document.querySelectorAll('.order-row').forEach(row => {
            row.addEventListener('mouseenter', function() {
                this.style.transform = 'translateX(5px)';
            });
            
            row.addEventListener('mouseleave', function() {
                this.style.transform = 'translateX(0)';
            });
        });
    }

    // Función separada para los event listeners de cambio de estado
    function initializeStatusChangeListeners() {
        document.querySelectorAll('.status-change').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // Efecto visual al hacer clic
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);
                
                const orderId = this.getAttribute('data-id');
                const status = this.getAttribute('data-status');
                
                // Cerrar el dropdown
                const dropdown = this.closest('.status-dropdown-menu');
                dropdown.style.display = 'none';
                dropdown.classList.remove('show');
                
                changeOrderStatus(orderId, status);
            });
        });
    }

    // Agregar CSS adicional para los dropdowns
    const additionalCSS = `
    <style>
        /* Estilos mejorados para dropdowns */
        .dropdown-wrapper {
            position: relative;
            display: inline-block;
        }

        .btn-status-dropdown {
            background: rgba(255, 209, 0, 0.1);
            border: 1px solid rgba(255, 209, 0, 0.3);
            color: var(--admin-primary);
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .btn-status-dropdown:hover {
            background: rgba(255, 209, 0, 0.2);
            border-color: var(--admin-primary);
            transform: scale(1.05);
        }

        .status-dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--admin-secondary);
            border: 1px solid rgba(255, 209, 0, 0.3);
            border-radius: var(--admin-radius);
            box-shadow: var(--admin-shadow);
            min-width: 180px;
            padding: 8px 0;
            margin-top: 5px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .status-dropdown-menu.show {
            opacity: 1;
            transform: translateY(0);
        }

        .dropdown-header {
            padding: 8px 16px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--admin-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid rgba(255, 209, 0, 0.2);
            margin-bottom: 4px;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background: rgba(255, 209, 0, 0.1);
            color: var(--admin-primary);
            transform: translateX(5px);
        }

        .dropdown-item i {
            font-size: 14px;
            width: 16px;
        }

        .dropdown-divider {
            height: 1px;
            background: rgba(255, 209, 0, 0.2);
            border: none;
            margin: 4px 0;
        }

        /* Animación para mostrar dropdown */
        @keyframes dropdownSlideIn {
            from {
                opacity: 0;
                transform: translateY(-10px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .status-dropdown-menu[style*="display: block"] {
            animation: dropdownSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
    `;

    // Agregar el CSS al head
    document.head.insertAdjacentHTML('beforeend', additionalCSS);

    // Inicializar cuando el documento esté listo
    document.addEventListener('DOMContentLoaded', function() {
        // ... resto del código de inicialización ...
        
        // Asegurarse de que los dropdowns se inicialicen correctamente
        setTimeout(initializeDropdowns, 500);
    });
</script>

</body>
</html>
